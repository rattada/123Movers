@model _123Movers.Models.SearchModel
@using _123Movers.Models
@{
    ViewBag.Title = "Search";

}

@section JavaScript{
    @Html.Script("search.js")
    @Html.Script("jquery.tablesorter.min.js")
}

<div class="alert-box message-error text-center" style="display: none"></div>
<h2>Search for Company </h2>
@using (Html.BeginForm("Search", "Home", FormMethod.Post, new { id = "frmsearch", @class = "form-horizontal" }))
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)
    <div class="row">
        <div class="col-md-5">
            <div class="form-group">
                <label class="control-label col-md-4">Name</label>
                <div class="col-md-8">@Html.TextBoxFor(m => m.CompanyName, new { @class = "form-control", id = "CompanyName" })</div>
                @Html.ValidationMessageFor(m => m.CompanyName)
            </div>
            <div class="form-group">
                <label class="control-label col-md-4" id="lblCompanyId">Company ID</label>
                <div class="col-md-8">@Html.TextBoxFor(m => m.CompanyId, new { @class = "form-control", id = "CompanyId" })</div>
                @Html.ValidationMessageFor(m => m.CompanyId)
            </div>
            <div class="form-group">
                <label class="control-label col-md-4" id="lblAX">AX #</label>
                <div class="col-md-8">@Html.TextBoxFor(m => m.AX, new { @class = "form-control", id = "AX" })</div>
                @Html.ValidationMessageFor(m => m.AX)
            </div>
            <div class="form-group">
                <label class="control-label col-md-4" id="lblInsertionOrderId">Insertion Order ID</label>
                <div class="col-md-8">@Html.TextBoxFor(m => m.InsertionOrderId, new { @class = "form-control", id = "InsertionOrderId" })</div>
                @Html.ValidationMessageFor(m => m.InsertionOrderId)
            </div>
        </div>
        <div class="col-md-4">
            <div class="top-buffer">
                <input type="submit" value="Search" class="btn btn-primary btn-lg" id="btnSearch">
            </div>
        </div>
    </div>
}

@if (@Model != null)
{
    <div class="nav nav-pills navbar-inverse">
        <div class="container">
            <h4 style="color: #fff" id="CompanyCount">
                @{
                    var count = @Model.Companies != null ? @Model.Companies.Count() : 0;
                }
                @count - Results
            </h4>
        </div>
    </div>
    <div class="table-responsive">
        <table id="info" class="table table-striped table-bordered tablesorter scrollable-table">
            <thead>
                <tr>
                    <th class="header text-center">Company ID
                    </th>
                    <th class="header text-center">Company Name
                    </th>
                    <th class="header text-center">AX #
                    </th>
                    <th class="header text-center" id="notSortID">Actions
                    </th>
                </tr>
            </thead>
            @if (@Model.Companies != null && @Model.Companies.Count() > 0)
            {
                foreach (var lot in Model.Companies)
                {
                <tr>
                    <td class="text-center">
                        @lot.CompanyId
                    </td>
                    <td class="text-center">
                        @lot.CompanyName
                    </td>
                    <td class="text-center">
                        @lot.AX
                    </td>
                    <td class="text-center">
                        @Html.ActionLink("Budget", "GetBudget", "Budget", new { companyid = @lot.CompanyId, companyName = @lot.CompanyName, ax = @lot.AX, contactperson = @lot.ContactPerson, suspended = @lot.Suspended, isactive = @lot.IsActive }, new { @class = "btn btn-info btn-sm" })
                        @Html.ActionLink("Reports", "Reports", "Report", new { companyid = @lot.CompanyId, companyName = @lot.CompanyName, ax = @lot.AX, contactperson = @lot.ContactPerson, suspended = @lot.Suspended, isactive = @lot.IsActive }, new { @class = "btn btn-info btn-sm" })
                    </td>
                </tr>
                }
            }
            else
            {
                <tr>
                    <td class="col-md-6 text-center" colspan="10"><b>No Results Found</b>
                    </td>
                </tr>
            }
        </table>
    </div>
}