@model _123Movers.Models.BudgetModel

@{
    ViewBag.Title = "Add Budget";
    Layout = "~/Views/Shared/_Layout.cshtml";
   
}
<script type="text/javascript" src="~/Scripts/jquery-ui-1.10.4.min.js"></script>
@*<script src="~/Scripts/jstree.js" type="text/javascript"></script>*@


@Html.AntiForgeryToken()
@Html.ValidationSummary(true)

<input type="hidden" id="message" value="@ViewBag.Success"/>
<div class="row">

     @Html.Partial("_CompanyInfo")
     
 </div>

@using (Html.BeginForm("AddBudget", "Home", FormMethod.Post, new { id = "frmaddbudget" }))
{
  
    <p class="clearfix"></p>
    <div class="row">
        <div class="col-lg-4">

            @*<div class="form-group" >
                
                    @Html.LabelFor(m => m.InsertionOrderId)
                @Html.TextBoxFor(m => m.InsertionOrderId)
                @Html.ValidationMessageFor(m => m.InsertionOrderId)
                </div>*@

            <div class="form-group">
                @Html.LabelFor(m => m.TotalBudget)
                @Html.TextBoxFor(m => m.TotalBudget, new { @class = "form-control" })
                @Html.ValidationMessageFor(m => m.TotalBudget)
            </div>
            <div class="form-group">
                @Html.LabelFor(m => m.AgreementNumber)
                @Html.TextBoxFor(m => m.AgreementNumber, new { @class = "form-control" })
                @Html.ValidationMessageFor(m => m.AgreementNumber)
            </div>

        </div>
        <div class="col-lg-4">
            @*  @Html.LabelFor(m => m.StartDate)
                @Html.TextBoxFor(m => m.StartDate, new { @class = "datepicker form-control" })
                @Html.ValidationMessageFor(m => m.StartDate)*@


            @*<div class="form-group checkbox">
                     @Html.LabelFor(m => m.IsRecurring)
                     @Html.CheckBoxFor(m => m.IsRecurring)
               
             </div>
                 <div class="form-group checkbox">
                       @Html.LabelFor(m => m.IsRequireNoticeToCharge)
                     @Html.CheckBoxFor(m => m.IsRequireNoticeToCharge)
              
             </div>*@
            @*<div class="form-group checkbox">
                     @Html.LabelFor(m => m.Expire)
                     @Html.CheckBoxFor(m => m.Expire)
                
             </div>*@
            @* <div class="form-group">
                <label>
                    Terms</label>
                @Html.DropDownList("terms", ViewBag.Terms as IEnumerable<SelectListItem>, new { id = "terms", @class = "form-control" })
                     </div> *@

            <div class="form-group">
                @Html.LabelFor(m => m.TermType)
                @Html.DropDownListFor(m => m.TermType, ViewBag.Terms as IEnumerable<SelectListItem>, "--Choose One--", new { @class = "form-control dropdown", @title = "Select Terms" })
                @Html.ValidationMessageFor(m => m.TermType)

                
            </div>

            <div class="form-group">
                @Html.LabelFor(m => m.ServiceId)
                @Html.DropDownListFor(m => m.ServiceId, ViewBag.Services as IEnumerable<SelectListItem>, "--Choose One--", new { id = "services", @class = "form-control dropdown", @title = "Select Services" })
                @Html.ValidationMessageFor(m => m.ServiceId)
            </div>

        </div>

        <div class="col-lg-4 pull-right">
            <div class="form-group">
                @Html.LabelFor(m => m.MinDaysToCharge)
                @Html.TextBoxFor(m => m.MinDaysToCharge, new { @class = "form-control" })
                @Html.ValidationMessageFor(m => m.MinDaysToCharge)
            </div>
            @*<div class="col-lg-3 pull-right">
                <div class="top-buffer">
                    <input type="submit" value="Save Budget" id="save" class="btn btn-primary">
                </div>
            </div>*@
        </div>

    </div>
    <div class="row">
        <div class="col-lg-3 pull-right">
            <a href="#" onclick="history.go(-1);return false;" class="btn btn-primary">Back To List</a>
            <input type="submit" value="Save Budget" id="save" class="btn btn-primary pull-right">
        </div>
    </div>


}


@*<div class="checkbox">
    <label>Filters </label>
    <input type="checkbox" id="service" />
</div>
<div class ="row">
    <div id ="filters">

    </div>
</div>

<div class ="row" style="display:none" id ="divfilters">
    <div class="col-lg-2 pull-right">
        <div class="top-buffer" >
            <input type="button" value="Save Filters" id ="savefilters" class="btn btn-primary">
        </div>
    </div>
</div>*@





@*<div class ="row">
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Get Services</h4>
      </div>
      <div class="modal-body">
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save</button>
      </div>
    </div>
  </div>
</div>
    </div>*@


<script type="text/javascript">
    $(function () {
        //$(".datepicker").datepicker();

        var message = $.trim($('#message').val());
        if (typeof message === 'undefined' || message.length <= 0) { } else { alert(message); }


        $('#service').on('change', function () {
            if (this.checked) {
                $.ajax({
                    url: '/Home/GetServices',
                    type: "GET",
                    dataType: "json",
                    success: function (data) {
                        var strigifyJson = JSON.stringify(data);
                        var json = $.parseJSON(strigifyJson);

                        var table;
                        table = "<div class='row'><div class = 'col-md-3'><table class='table table-striped'><thead><tr><th class='col-md-1'></th><th class='col-md-2'>" + 'Area Code' + "</th><th class='col-md-2'>" + 'Price' + "</th></tr> </thead><tbody>";
                        jQuery.each(json, function (i, val) {
                            if (i <= 57) {
                                table += "<tr><td><input type='checkbox' id='chk" + val[0] + "' class='checkbox' /> </td><td>" + val[1] + " ---> " + val[0] + "</td><td><input type='text' id='txt" + val[0] + "' class='form-control' /> </td></tr>";
                            }
                        });
                        table += "</tbody></table></div>";

                        var table1 = "<div class = 'col-md-3'><table class='table table-striped'><thead><tr><th class='col-md-1'></th><th class='col-md-2'>" + 'Area Code' + "</th><th class='col-md-2'>" + 'Price' + "</th></tr> </thead><tbody>";
                        jQuery.each(json, function (i, val) {
                            if (i >= 58 && i <= 115) {
                                table1 += "<tr><td><input type='checkbox' id='chk" + val[0] + "' class='checkbox' /> </td><td>" + val[1] + " ---> " + val[0] + "</td><td><input type='text' id='txt" + val[0] + "' class='form-control' /> </td></tr>";
                            }
                        });
                        table1 += "</tbody></table></div>";

                        var table2 = "<div class = 'col-md-3'><table class='table table-striped'><thead><tr><th class='col-md-1'></th><th class='col-md-2'>" + 'Area Code' + "</th><th class='col-md-2'>" + 'Price' + "</th></tr> </thead><tbody>";
                        jQuery.each(json, function (i, val) {
                            if (i >= 116 && i <= 173) {
                                table2 += "<tr><td><input type='checkbox' id='chk" + val[0] + "' class='checkbox' /> </td><td>" + val[1] + " ---> " + val[0] + "</td><td><input type='text' id='txt" + val[0] + "' class='form-control' /> </td></tr>";
                            }
                        });
                        table2 += "</tbody></table></div>";

                        var table3 = "<div class = 'col-md-3'><table class='table table-striped'><thead><tr><th class='col-md-1'></th><th class='col-md-2'>" + 'Area Code' + "</th><th class='col-md-2'>" + 'Price' + "</th></tr> </thead><tbody>";
                        jQuery.each(json, function (i, val) {
                            if (i >= 174 && i < json.length) {
                                table3 += "<tr><td><input type='checkbox' id='chk" + val[0] + "' class='checkbox' /> </td><td>" + val[1] + " ---> " + val[0] + "</td><td><input type='text' id='txt" + val[0] + "' class='form-control' /> </td></tr>";
                            }
                        });
                        table3 += "</tbody></table></div>";

                        table += table1 + table2 + table3;

                        $("#filters").html(table);

                        $("#divfilters").css("display", "block");



                    },
                    error: function (xhr, ajaxOptions, thrownError) {

                    }
                });
                // $('#myModal').modal('show')
            }
            else {
                $("#filters").html('');
                $("#divfilters").css("display", "none");
            }
        });

        //$('#services').on('change', function () {
        //        $.ajax({
        //            url: '/Home/GetServices',
        //            type: "GET",
        //            dataType: "json",
        //            success: function (data) {
        //                var strigifyJson = JSON.stringify(data);
        //                var json = $.parseJSON(strigifyJson);

        //                var tr;
        //                tr = "<table class='table'><tr><td class='col-md-2'>" + 'Area Code' + "</td><td >" + 'State' + "</td></tr>";
        //                jQuery.each(json, function (i, val) {
        //                    tr += "<tr><td>" + val['areaCode'] + "</td><td>" + val['longState'] + "</td></tr>";
        //                });
        //                tr += "</table>";
        //                $(".modal-body").html(tr);


        //            },
        //            error: function (xhr, ajaxOptions, thrownError) {
        //            }
        //        });

        //        $('#myModal').modal('show')
        //});

        $("#save").click(function () {
            @*  $.ajax({
                url: '/Home/AddBudget',
                type: 'POST',
                dataType: 'json',
                traditional: true,
                data: { "model": @Model },
                success: function () {
                    //reordered = false;
                    //$('#saveOrder').removeClass('Save').addClass('Disabled').unbind('click');
                    //$("body").unmask();
                    //Dominion.Cms.Common.showSuccessMessage("#cmsMessage", "Coupon order saved successfully.");
                },
                error: function () {
                    //$("body").unmask();
                    //Dominion.Cms.Common.showErrorMessage("#cmsMessage", "There was an error saving the coupon order. Please try again.");
                }
            });*@
        });


    });
</script>
